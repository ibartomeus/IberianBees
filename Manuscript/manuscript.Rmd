---
title: "| Base de datos de abejas ibéricas \n| Iberian Bees database\n"
author: Ignasi Bartomeus^1^, Jose B. Lanuza^1^, Thomas Wood^2^, Luisa Carvalheiro^3,4^, and a lot of coauthors to be added^5^s
output:
  pdf_document: default
  word_document:
    fig_caption: yes
    fig_height: 6
    fig_width: 7.5
    highlight: null
    reference_docx: Ecosistemas_template.docx
csl: ecosistemas.csl
bibliography:
- references.bib
- knitcitations.bib
editor_options: 
  
  chunk_output_type: console
header-includes:
- \DeclareUnicodeCharacter{0301}{*************************************}
- \usepackage{caption}
- \captionsetup[figure]{labelformat=empty}
- \captionsetup[table]{labelformat=empty}
---

```{r include=FALSE}

#Load main libraries at once
library(tidyverse)
library(dplyr)
library(data.table)

#To obtain the same template
# install.packages("remotes")
#remotes::install_github("Pakillo/template")

```


```{r knitcitations, echo=FALSE, cache = FALSE}
library(knitcitations)
cleanbib()   
cite_options(citation_format = "pandoc")
```



```{r include=FALSE}
#Load data
data <- read.table("../Data/iberian_bees.csv.gz",  header=T, quote="\"", sep=",")
#Delete first col that are rownames
data <- data %>% select(-X)

#Load Iberianbees masterlist
master <- read.csv("../Data/Processing_iberian_bees_raw/Iberian_species_masterlist.csv", stringsAsFactors = FALSE)

#Load removed species from the database
removed <- read.csv("../Data/Processing_iberian_bees_raw/removed.csv")
master$Accepted_name <- paste(master$Genus, master$Species, sep = " ")
data$Latitude <- as.numeric(data$Latitude)
data$Longitude <- as.numeric(data$Longitude)

#Create vector with info for abstract
#Geo
geo <- length(which(!is.na(data$Latitude) & !is.na(data$Longitude)))
#Flowers
flw <- length(which(!is.na(data$Flowers.visited)))
#Locality
local <- length(which(!is.na(data$Locality)))
#Colector and ide by
deter <- length(which(!is.na(data$Collector) & !is.na(data$Determined.by)))
#Locality
date <- length(which(!is.na(data$Year) & !is.na(data$Month) & !is.na(data$Day)))



#Date for the ones that do not have specific date (range date)
date_1 <- data[is.na(data$Latitude) & is.na(data$Longitude),]
date_2 <- length(which(!is.na(date_1$Start.date) & !is.na(date_1$End.date)))

```

> (1) Departamento de Ecología Integrativa, Estación Biológica de Doñana (EBD-CSIC), Consejo Superior de Investigaciones Científicas, Avda. Américo Vespucio s/n, E-41092 Sevilla, España.  
> (2) Laboratory of Zoology, University of Mons, Avenue du Champs de Mars 6, 7000, Mons, Belgium.  
> (3) CE3C, Universidade de Lisboa, Lisboa, Portugal.  
> (4) Departamento de Ecologia, Universidade Federal de Goiás, Goiânia, Brasil.  
> (5)

> Autor para correspondencia: I. Bartomeus [nacho.bartomeus@gmail.com]


# Resumen

> **Base de datos de abejas ibéricas**. Las abejas (Anthophila) son un grupo extremadamente diverso con más de 1,000 especies descritas en la península ibérica. Además, son excelentes polinizadores y proveen numerosos servicios ecosistémicos fundamentales para la mayoría de ecosistemas terrestres. Debido a los diversos cambios ambientales inducidos por el ser humano, existen evidencias del declive de algunas de sus poblaciones para ciertas especies. Sin embargo, sabemos muy poco del estado de conservación de la mayoría de especies y para muchas de ellas apenas sabemos cuál es su distribución en la península ibérica. En este trabajo presentamos un esfuerzo colaborativo para crear una base de datos de ocurrencias de abejas que abarca la península ibérica e Islas Baleares que permitirá responder preguntas sobre la distribución de las diferentes especies, preferencia de hábitat, fenología o tendencias históricas. En total esta base de datos consta por ahora de `r formatC(nrow(data),format="d", big.mark=",")` registros de `r length(unique(data$Accepted_name))` especies con un `r round(geo/nrow(data),2)*100`% de estos con información georreferenciada recolectada entre `r min(data$Year, na.rm = T)` y `r max(data$Year, na.rm = T)`. Además cada registro tiene información asociada como la localidad de muestreo (`r round(local/nrow(data),2)*100`%), identificador y colector de la especie (`r round(deter/nrow(data),2)*100`%), fecha de captura (`r round(date/nrow(data),2)*100`%) y planta donde se recolectó (`r round(flw/nrow(data),2)*100`%). Creemos que esta base de datos es el punto de partida para conocer y conservar mejor la biodiversidad de abejas en la península ibérica e Islas Baleares. Se puede acceder en: https://doi.org/10.5281/zenodo.6354502


# Abstract

> **Iberian Bees database**. Bees are a diverse group with more than 1,000 species known from the Iberian Peninsula. They have increasingly received special attention due to their important role as pollinators and providers of ecosystem services. In addition, various rapid human-induced environmental changes are leading to the decline of some of its populations. However, we know very little about the conservation status of most species and for many species, we hardly know their true distributions across the Iberian Peninsula. Here we present a collaborative effort to collate and curate a database of Iberian bee occurrences to answer questions about their distribution, habitat preference, phenology, or historical trends. In total we have accumulated `r formatC(nrow(data),format="d", big.mark=",")` records from the Iberian Peninsula and the Balearic Islands of `r length(unique(data$Accepted_name))` different species with `r round(geo/nrow(data),2)*100`% of georeferenced records collected between `r min(data$Year, na.rm = T)` and `r max(data$Year, na.rm = T)`. In addition, each record has associated information such as the sampling location (`r round(local/nrow(data),2)*100`%), collector and person who id the species (`r round(deter/nrow(data),2)*100`%), date of the capture (`r round(date/nrow(data),2)*100`%) and plant species where the bees was captured (`r round(flw/nrow(data),2)*100`%). We believe that this database is the starting point to better understand and conserve bee biodiversity in the Iberian Peninsula. It can be accessed at: https://doi.org/10.5281/zenodo.6354502.

# Palabras clave

> Biodiversidad; Apoidea; Polinizadores; Fenología 

# Keywords

> Biodiversity; Apoidea; Pollinators; Phenology

# Background & Summary   

Bees (Hymenoptera, Apoidea, Anthophila) are a diverse group of insects with more than 20,000 species described worldwide [@ascher2020]. The Iberian Peninsula, with its bee-loved Mediterranean climate, is one of the hotspots of bee biodiversity with more than 1,000 species recorded to date and counting [@ascher2020; @ortiz2020]. Unfortunately, despite the high biodiversity of Iberian bees, we know very little about the species themselves and their distributions. This is paradoxical, as in recent years bees have been highlighted as a keystone group in the ecosystem due to a key function they provide, the pollination of thousands of plants [@ollerton2011], including most crop species [@klein2007]. In addition, various rapid human-induced environmental changes are leading to the decline of some bee populations [@goulson2015]. However, the response of bee species to global change is heterogeneous both in space and also taxonomically. That is, while in some areas species are declining drastically  [@burkle2013], other areas are well conserved [@herrera2019] and while some species are in the brink of extinction [@cameron2011] some species are even thriving [@russo2016]. A better description of bee distributions, habitat preferences, phenologies, or historical trends in the Iberian Peninsula would require information on when and where different species occur.

In the absence of standardized monitoring efforts, one may think that detailed information on species occurrences in space and time does not exists. However, there are different sources of extremely useful information. First, natural history museums hold historical collections of amateur naturalists and researchers who collected bees [@bartomeus2019]. Collectors are very good at classifying and labeling each collected specimen, which means we can retrieve the information stored along the pinned specimens about when and where those where collected. Second, the Iberian Peninsula has a rich tradition of pollinator and pollination researchers [@archer2014], which have been collecting occurrence bee data with different aims. Finally, many occurrence records are being made available through internet portals which centralize data hosted in institutions all around the world (e.g. Gbif) or collected by citizen scientists (e.g. iNaturalist). The challenge is how to digitalize, access, and curate all these different data sources.

Here we have compiled an Iberian Bee Database of occurrence records by integrating digitalization efforts by leading national history museums, with more than 100 individual datasets contributed by researchers, and publicly available information on online repositories. After data cleaning and harmonization, we release the first `r nrow(data)` records from the Iberian Peninsula and the Balearic Islands. **Figure 1** shows the spatial distribution of records, which as expected its biased to certain areas near main cities. Overall, the database contains information of `r length(unique(data$Accepted_name))` different species, for which the most commonly collected are depicted in **Figure 2**. The data has been collected between `r min(data$Year, na.rm = T)` and `r max(data$Year, na.rm = T)`, with an increasing trend of the number of records with time, reflecting a renewed interest for documenting this taxa (**Figure 3A**). As expected, most records were recorded in spring with May being the month with highest number of records (**Figure 3B**). More than `r round(geo/nrow(data),2)*100`% of these records have associated information such as the location and date of capture, and `r round(flw/nrow(data),2)*100`% have extra data such as the plant species where it was collected. Here, we release the version 1.0 of the Iberian Bee Database with name "IberianBees". Although it will continue to grow, we believe that this is a good starting point to better understand and conserve bee biodiversity. It can be accessed at: https://doi.org/10.5281/zenodo.6354502.

# Antecedentes y resumen ampliado 

Las abejas (Hymenoptera, Apoidea) son un grupo muy diverso de especies con más de 20,000 especies descritas en el mundo [@ascher2020]. Debido a las condiciones climáticas de la península ibérica, esta se caracteriza por ser uno de los puntos calientes de biodiversidad a nivel mundial con más de 1000 abejas descritas hasta la fecha [@ortiz2020]. A pesar de la gran biodiversidad de abejas ibéricas, conocemos muy poco de su ecología y distribución. Paradójicamente las abejas son un un grupo clave que desarrolla una función vital para la moyoría de ecosistemaas terrestres, la polinización de miles de plantas [@ollerton2011] incluyendo a la mayoría de cultivos [@klein2007]. Además el cambio debido al impacto del ser humano esta dando lugar al declive de algunas de sus poblaciones [@goulson2015]. No obstante, la respuesta de las abejas al cambio global es heterogénea tanto en el espacio como taxonomicámente. Es decir, existen áreas que están sufriendo un decaimiento poblacional drástico [@burkle2013] mientras que otras se mantienen bien conservadas [@herrera2019] y mientras que algunas especies se encuntra al borde de la extinción [@cameron2011], otras se encuentran incluso prosperando [@russo2016]. Una mejor descripción de la distribución de las abejas sobre su distribución, preferencia de hábitat, fenología, o tendencias históricas en la península ibérica requerirían información de dónde y cuándo las especies aparecen.  

Con la ausencia de esfuerzos de muestreo estandarizados se podría pensar que información detallada de la ocurrencia de especies en el espacio y en el tiempo no existe. Sin embargo, existen diversas fuentes con información muy útil. En primer lugar, los museos de historia natural albergan colecciones históricas de naturalistas amateur e investigadores que coleccionaron abejas [@bartomeus2019]. Puesto que las colecciones de museos suelen estar muy bien clasificadas y etiquetadas, es posible recopilar la información sobre los especímenes de la colección y cuándo y dónde estos fueron capturados. En segundo lugar, la península ibérica tiene una rica tradición de investigadores sobre polinizadores y polinización [@archer2014] que han recopilado gran cantidad información de abejas con diferentes objetivos. Finalmente, muchos datos de ocurrencias han sido liberados de forma abierta a través de portales de internet que centralizan datos almacenados por instituciones de todo el mundo (p.ej. Gbif) o datos de ciencia ciudadana (p.ej. iNaturalist). No obstante, sigue siendo un desafio digitalizar, acceder y limpiar toda la información existente de las diferentes fuentes de datos.

En este estudio hemos creado una base datos de abejas ibéricas a través de unificar: (i) los esfuerzos de digitalización de museos,  (ii) conjuntos de datos de investigadores, e (iii) información de repositorios en línea de libre acceso. Tras la limpieza de los datos y homogeneización de los mismos para crear la base de datos, nosotros liberamos los primeros `r nrow(data)` registros que abarcan la península ibérica e Islas Baleares. La **Figura 1** muestra la distribución espacial de los registros, tal y como se esperaba existe un sesgo hacia ciertas áreas cercanas a los grandes núcleos urbanos. Esta base de datos contiene información sobre `r length(unique(data$Accepted_name))` diferentes especies y las 20 especies más comunes se encuentran representadas con su respectivo número de registros en la **Figura 2**. Los datos han sido recopilados entre `r min(data$Year, na.rm = T)` y `r max(data$Year, na.rm = T)`, con un ascendente número de registros en el tiempo que refleja el creciente interés de documentar a este grupo taxonómico (**Figura 3A**). Además, como es de esperar la mayoría de registros tienen lugar en los meses de primavera, siendo mayo el mes que consta de un mayor número de registros  (**Figura 3B**). El `r round(geo/nrow(data),2)*100`% de estos registros constan de información georreferenciada y el resto de registros al menos contienen información de la localidad del evento de captura u observación del espécimen. También un `r round(date/nrow(data),2)*100`% de los diferentes registros posee información sobre la fecha de captura y un `r round(flw/nrow(data),2)*100`% tiene información de la(s) planta(s) donde se capturo o se produjo la observación. Esta es la versión 1.0 de la base de datos de abejas ibéricas con nombre "IberianBees" que aunque continuará creciendo creemos que este es un buen punto de partida para empezar a mejorar nuestro conocimiento y conservación de este grupo taxonómico tan importante para nuestros ecosistemas y la producción agrícola. Se puede acceder desde: https://doi.org/10.5281/zenodo.6354502.

# Material y métodos  

## Recopilación de datos originales

*Museos*: Hemos digitalizado el 10% de los especímenes depositados en el Museo Nacional de Ciencias Natural de Madrid (MNCN), sobre todo las familias Melitidae y Apidae, para las cuales se han revisado las identificaciones taxonómicas. Así como recabado información digitalizada de museos extranjeros incluyendo "Naturalis Biodiversity Center" (Holanda), "Oberösterreichisches Landesmuseum" (Austria) y la "Smithosian collection" (USA). En el futuro esta previsto continuar con la digitalización del MNCN, así como añadir otras colecciones históricas de importancia.

*Proyectos de investigación*: Para recoger datos sobre ocurrencia de abejas en la península ibérica hemos contactado con los principales investigadores en ecología de la polinización de España y Portugal, así como anunciado en las principales listas de distribución temáticas de la creación de una base de datos de abejas ibéricas. Se recogieron `r length(unique(data$Authors.to.give.credit))-2` estudios con datos ya digitalizados. Estos han sido limpiados y homogeneizados (ver más abajo). En el futuro se seguiran añadiendo nuevas contribuciones, y además se rescatarán datos ya publicados en formatos de difícil extracción como PDF.

*Repositorios de internet*: Usando los paquetes de R rgibif versión 3.6.0 [@gbif] y rinat versión 0.1.8 [@inat] hemos descargado todas las ocurrencias de abejas de la península ibérica de los repositorios de libre acceso Gbif (https://www.gbif.org) e INaturalist (https://www.inaturalist.org) a fecha 14-03-2022. Estos datos pueden ser actualizados en nuevas versiones automáticamente y así incorporar los nuevos registros a la base de datos.

## Tratamiento de datos

Todo el tratamiento de datos se ha hecho de forma reproducible en R `r citep(citation())`. Primero hemos seleccionado los campos comunes que reflejan la especie, el sexo, fecha de captura y localización del registro, además de la referencia correspondiente al registro si era oportuno. La **Tabla 1** ofrece un resumen de los metadatos creados con DataSpice [@dataspice], y también están disponibles en formato json y EML [@EML_2019], los cuales estan indexados por Google datasets. Debido a la naturaleza variada de este tipo de datos el proceso de limpieza de datos fue un proceso complejo y tedioso. De los `r nrow(data)+nrow(removed)` datos iniciales, `r nrow(removed)` fueron descartados. Todo el proceso así como los datos descartados pueden consultarse aquí: https://github.com/ibartomeus/IberianBees 

En primer lugar se revisó toda la taxonomía de las especies que se cotejó con la lista de especies actualizada para la península ibérica [@ortiz2020]. Solo se han aceptado especies correctamente identificadas a nivel de especie. Se han actualizado más de `r length(which(data$Accepted_name != data$Original_name))` registros, actualizando todos los sinónimos y corrigiendo errores tipográficos. En segundo lugar, se ha recogido información del país, provincia y localidad de donde se produjo el registro. Además se realizó un proceso de estandarización de las geolocalizaciones a latitud y longitud en grados decimales (WGS84) siempre y cuando esta información estaba presente. Aunque también se incluyó información sobre la precisión de las coordenadas, este metadato estaba raramente disponible para muchas de las coordenadas. En tercer lugar, se ha incluido también información de la fecha de la captura u observación con respectivo día, mes y  año. Para registros sin fecha concreta, se intentó recuperar un intervalo temporal orientativo si era posible. Los datos con fechas y localizaciones erróneas o ilógicas (e.g. geolocalizaciones en el mar o especiménes recogidos en el mes 18) han sido corregidos o eliminados. En cuarto lugar, se han añadido los nombres de los colectores y personas que identificaron las especies, así como información sobre el número de abejas macho, hembra u obreras cuando se especificaba. Finalmente, se han añadido las referencias correspondientes a cada registro y otros datos de interés como la planta que visitaba el espécimen de interés, identificación unica de la base de datos local (si la hay), autores que han proporcionado los datos y cualquier otra nota de interés si la había.
 
En la base de datos resultante se ha asignado a cada entrada o registro  un identificador único. Además, se ha guardado tanto el nombre de la especie original tal y como fue inicialmente identificada, como el nombre tras haber sido revisado. Sinonímias o nombres de especies que no se encontraron en la lista actualizada de abejas ibéricas fueron consultadas a taxonómos expertos antes de ser descartadas.

## Flujo de trabajo

Toda la base de datos se puede reconstruir de las fuentes originales usando los scripts proporcionados, y por tanto se pueden trazar todas las decisiones tomadas. Finalmente, se ha creado una plantilla para contribuir con más datos que puede ser consultada en el repositorio de esta base de datos.

Utilizamos R `r citep(citation())` y Rmarkdown `r citep(list(citation("knitr"), citation("rmarkdown")))` para todo el procesado, escritura y creación de esta base de datos.

# Registro y disponibilidad de datos  

Todo el proceso de trabajo esta en abierto en Github y los todos los archivos del código creado tienen licencia MIT (https://opensource.org/licenses/MIT). El uso de datos tine licencia CC-By 4.0 (https://creativecommons.org/licenses/by/4.0/). La versión depositada junto al envio de este artículo corresponde a la version 1.0. de IberianBees, y tanto los datos como los scripts tienen una version permanente depositada en Zenodo que es citable usando este identificador único (https://doi.org/10.5281/zenodo.6354503). Se usará un sistema de versionado incremental, donde pequeñas correcciones de errores, o incrementos no substanciales de datos recibiran actualizaciones en el primer digito (v1.1, v.1.2, etc...) y actualizaciones mayores en el segundo numero (v2.0, v3.0, etc...). Todas las actualizaciones mayores serán depositadas en Zenodo bajo el DOI general: https://doi.org/10.5281/zenodo.6354502.

# Contribución de los autores

IB, LGC y TW han compilado los datos de múseos y propietarios individuales de datos. MAC ayudó con la recogida de datos de la literatura. PA digitalizó los datos de MNCN. TW y CM ayudaron con las revisiones taxonómicas. IB y JBL limpiaron y prepararon la base de datos. IB, LGC, TW and JBL escribieron el artículo. Todos los autores contribuyeron con datos.

# Agradecimientos

Gracias a todos los naturalistas y científicos que han contribuido de algún modo en la creación de esta base de datos, este trabajo es el resultado del cariño y esfuerzo de miles de personas. Esta base de datos se ha realizado con la ayuda de los proyectos EUCLIPO (Fundaçao para a Ciencia e a Tecnologia, LISBOA-01-0145-FEDER-028360/EUCLIPO) y SAFEGUARD (ref. 101003476 H2020-SFS-2019-2).

# Referencias

```{r write_citations, cache=FALSE, include=FALSE}
write.bibtex(file="knitcitations.bib")
```

<div id = "refs"></div>

\newpage

###### LEYENDA DE TABLA

**Tabla 1**. Metadatos explicando el significado y las unidades de cada variable en el set de datos. 

###### TABLE CAPTION

**Table 1**. Metadata explaining for each variable in the data set, its meaning and units.

```{r Tabla1, results='asis', echo=FALSE, cache=FALSE}
library("knitr")
metadata <- read.csv("../Data/Metadata/attributes.csv")
colnames(metadata) <- c("","Variable name", "Description", "Data type")

kable(metadata[,-1], caption ="\\textbf{Figure 1}")
```

\newpage

###### PIES DE FIGURA

**Figura 1**. Barplot of the number of records of the 20 most common species.

**Figura 2**. Map of the Iberian Peninsula where the different number of records are shown with a colour code in logarithmic scale. Areas with high number of records are coloured in yellow, areas with low number of records in purple and areas with lack of records are shown in white.

**Figura 3**. Number of records in the database by year (A) and month (B).

###### FIGURE LEGENDS

**Figura 1**. Gráfico de barras del número de registros de las 20 especies más abundantes. 

**Figura 2**. Mapa de la península ibérica donde se muestra el número de registros en escala logarítmica con un código de colores. Áreas con alto número de registros se muestran en amarillo, con un bajo número de registros en morado y zonas con ausencia de registros en blanco.

**Figura 3**. Número de registros en la base de datos por año (A) y por mes (B).


```{r echo=FALSE, fig.align='center', out.width="70%", fig.cap="\\textbf{Figure 1}"}
# Prepare top 20 records
top_20 <- data %>%
  filter(!Accepted_name == "Apis mellifera") %>%
  group_by(Accepted_name) %>%
  summarise(no_rows = length(Accepted_name)) %>%
  arrange(-no_rows) %>%
  slice(1:20)
# Fix row position
top_20$Accepted_name <- factor(top_20$Accepted_name, levels = top_20$Accepted_name)
# Plot
ggplot(top_20, aes(x = Accepted_name, y = no_rows)) +
  geom_bar(stat = "identity", fill = "#287D8EFF") +
  theme_classic() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1, size = 8, face = "italic")) +
  ylab("Number of records") +
  xlab("Species") +
  scale_y_continuous(expand = c(0, 0))
```

```{r echo=FALSE, message=FALSE, warning=FALSE, fig.align='center', fig.cap="\\textbf{Figure 2}",out.width="70%"}
# code courtesy of Paco Rodriguez.
library(sf)
library(raster)
library(rasterVis)
library(tidyverse)
crs.geo <- "+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"
crs.laea <- "+proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs"

library(data.table)
data <- read.table("../Data/iberian_bees.csv.gz", header = T, quote = "\"", sep = ",")

# Prepare data
data$Longitude <- as.numeric(data$Longitude)
data$Latitude <- as.numeric(data$Latitude)
data <- data %>% filter(!is.na(Latitude) & !is.na(Longitude))
# Keep points on balearic islands
data_1 <- data %>% filter(Province == "Balears, Illes")
data_1$Country_1 <- NA

# Filter points in Spain and Portugal
data$Country_1 <- NA
data$Country_1 <- maps::map.where(x = data$Longitude, y = data$Latitude)
data <- data %>% filter(Country_1 == "Spain" | Country_1 == "Portugal")
# Rbind points that are in Spain with the ones of Balearic islands
dat <- rbind(data, data_1)

datos.sf <- st_as_sf(dat,
                     coords = c("Longitude", "Latitude"),
                     crs = crs.geo
)

datos.laea <- st_transform(datos.sf,
                           crs = crs.laea
)

ras <- raster(datos.laea, resolution = 10000)

ras.counts <- rasterize(datos.laea[, "Accepted_name"], ras,
                        field = "Accepted_name", fun = "count"
)

levelplot(log(ras.counts+1), margin = FALSE, scales = list(draw = FALSE),
          par.settings = viridisTheme())


```

```{r echo=FALSE, warning=FALSE, message=FALSE, fig.cap="\\textbf{Figure 3}", message=FALSE, warning=FALSE, cache=FALSE}
# Prepare top 20 records
by_year <- data %>% filter(!Accepted_name == "Apis mellifera")

p1 <- ggplot(by_year, aes(Year)) +
  geom_histogram(fill = "#287D8EFF") +
  theme_classic() +
  ylab("Number of records") +
  scale_y_continuous(expand = c(0, 0)) + ggtitle("A")

data$month_name <- month.abb[data$Month]

month_sum <- data %>%
  group_by(month_name) %>%
  summarise(no_rows = length(month_name)) %>%
  arrange(-no_rows)

month_sum <- month_sum %>% filter(!is.na(month_name))

month_sum$month_name <- factor(month_sum$month_name, levels = c(
  "Jan", "Feb", "Mar",
  "Apr", "May", "Jun",
  "Jul", "Aug", "Sep",
  "Oct", "Nov", "Dec"
))

p2 <- ggplot(data = month_sum, aes(x = month_name, y = no_rows)) +
  geom_bar(stat = "identity", fill = "#287D8EFF") +
  theme_classic() +
  scale_y_continuous(expand = c(0, 0)) +
  ylab("Number of records") +
  xlab("Months") + ggtitle("B")

library(patchwork)

p1 / p2
```



